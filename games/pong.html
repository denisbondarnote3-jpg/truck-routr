<!doctype html>
<html lang="uk">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Pong</title>
<style>
  :root{--bg:#000;--line:#1e293b;--text:#e2e8f0;--accent:#22d3ee;--win:#10b981}
  *{box-sizing:border-box} html,body{height:100%;margin:0;background:#000;color:var(--text);font-family:system-ui,Segoe UI,Roboto,Inter,Arial}
  .wrap{max-width:960px;margin:0 auto;padding:12px}
  .top{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
  .btn{padding:8px 12px;border:1px solid #334155;border-radius:10px;background:#0b1220;color:#fff;font-weight:700;cursor:pointer}
  .btn:active{transform:scale(.98)}
  .score{font-weight:900;letter-spacing:1px}
  canvas{width:100%;height:auto;background:#020617;border:1px solid #1f2937;border-radius:12px;display:block}
  .help{opacity:.8;font-size:14px;margin-top:8px}
</style>
</head>
<body>
  <div class="wrap">
    <div class="top">
      <div class="score">üÖ∞Ô∏è <span id="sL">0</span> : <span id="sR">0</span> üÖ±Ô∏è</div>
      <div>
        <button id="btnPause" class="btn">‚è∏ –ü–∞—É–∑–∞</button>
        <button id="btnReset" class="btn">‚ôªÔ∏è –°–∫–∏–Ω—É—Ç–∏</button>
      </div>
    </div>
    <canvas id="game" width="960" height="540"></canvas>
    <div class="help">–ö–µ—Ä—É–≤–∞–Ω–Ω—è: –º–∏—à–∫–æ—é / —Ç–∞—á–µ–º ‚Ä¢ –∞–±–æ –∫–ª–∞–≤—ñ—à—ñ W/S (‚¨ÜÔ∏é/‚¨áÔ∏é). –ü–µ—Ä—à–∏–π –¥–æ 7 ‚Äî –ø–µ—Ä–µ–º—ñ–≥.</div>
  </div>

<script>
const cvs = document.getElementById('game');
const ctx = cvs.getContext('2d',{alpha:false});

const W = cvs.width, H = cvs.height;
const mid = H/2;

// –æ–±‚Äô—î–∫—Ç–∏
const PADDLE_H = 90, PADDLE_W = 14, MARGIN = 20;
const left = { x:MARGIN, y:mid-PADDLE_H/2, w:PADDLE_W, h:PADDLE_H, vy:0 };
const right= { x:W-MARGIN-PADDLE_W, y:mid-PADDLE_H/2, w:PADDLE_W, h:PADDLE_H, vy:0 };

const ball0=()=>({ x:W/2, y:H/2, r:8, vx:(Math.random()<.5?-1:1)*(4+Math.random()*2), vy:(Math.random()-.5)*6 });
let ball = ball0();

let sL=0,sR=0, paused=false, raf;

const sLel=document.getElementById('sL'), sRel=document.getElementById('sR');
const btnPause=document.getElementById('btnPause'), btnReset=document.getElementById('btnReset');

function clamp(v,a,b){ return Math.max(a,Math.min(b,v)); }

function drawCourt(){
  ctx.fillStyle="#000";
  ctx.fillRect(0,0,W,H);
  // —Å—ñ—Ç–∫–∞
  ctx.strokeStyle="rgba(148,163,184,.15)";
  ctx.lineWidth=1;
  for(let y=0;y<H;y+=24){
    ctx.beginPath(); ctx.moveTo(W/2,y); ctx.lineTo(W/2,y+12); ctx.stroke();
  }
}

function drawPaddle(p){
  ctx.fillStyle="#94a3b8";
  ctx.fillRect(p.x,p.y,p.w,p.h);
}

function drawBall(){
  ctx.fillStyle="#22d3ee";
  ctx.beginPath(); ctx.arc(ball.x,ball.y,ball.r,0,Math.PI*2); ctx.fill();
}

function serve(side){
  ball = ball0();
  ball.vx = (side==='L'?1:-1) * (4+Math.random()*2);
  ball.x += (side==='L'?50:-50);
}

function update(){
  // —Ä—É—Ö —Ä–∞–∫–µ—Ç–æ–∫ (–∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∞)
  left.y += left.vy;
  right.y += right.vy;
  left.y = clamp(left.y, 0, H-left.h);
  right.y= clamp(right.y,0,H-right.h);

  // AI –¥–ª—è –ø—Ä–∞–≤–æ—ó (–ª–µ–≥–∫–∞ –¥–æ–ø–æ–º–æ–≥–∞ –≥—Ä–∞–≤—Ü—é)
  const target = ball.y - right.h/2;
  right.y += clamp(target-right.y, -5, 5);

  // –º‚Äô—è—á
  ball.x += ball.vx;
  ball.y += ball.vy;

  // –≤—ñ–¥—Å–∫–æ–∫–∏ –∑–≤–µ—Ä—Ö—É/–∑–Ω–∏–∑—É
  if(ball.y - ball.r < 0){ ball.y = ball.r; ball.vy *= -1; }
  if(ball.y + ball.r > H){ ball.y = H - ball.r; ball.vy *= -1; }

  // –∫–æ–ª—ñ–∑—ñ—ó –∑ —Ä–∞–∫–µ—Ç–∫–∞–º–∏
  const hitL = ball.x-ball.r <= left.x+left.w && ball.y>=left.y && ball.y<=left.y+left.h;
  const hitR = ball.x+ball.r >= right.x && ball.y>=right.y && ball.y<=right.y+right.h;

  if(hitL){
    ball.x = left.x+left.w+ball.r;
    const rel = (ball.y - (left.y+left.h/2)) / (left.h/2);
    ball.vx = Math.abs(ball.vx) + 0.2;
    ball.vx *= 1;
    ball.vy = rel*6;
  }
  if(hitR){
    ball.x = right.x - ball.r;
    const rel = (ball.y - (right.y+right.h/2)) / (right.h/2);
    ball.vx = -Math.abs(ball.vx) - 0.2;
    ball.vy = rel*6;
  }

  // –≥–æ–ª
  if(ball.x < -30){ sR++; sRel.textContent=sR; serve('R'); }
  if(ball.x > W+30){ sL++; sLel.textContent=sL; serve('L'); }

  // –ø–µ—Ä–µ–º–æ–∂–µ—Ü—å
  if(sL>=7 || sR>=7){
    paused = true;
    ctx.fillStyle = (sL>sR?'#10b981':'#ef4444');
    ctx.font = "bold 48px system-ui,Segoe UI,Roboto,Inter,Arial";
    ctx.textAlign="center";
    ctx.fillText((sL>sR?'–õ—ñ–≤–∏–π –≥—Ä–∞–≤–µ—Ü—å –ø–µ—Ä–µ–º—ñ–≥!':'–ü—Ä–∞–≤–∏–π –≥—Ä–∞–≤–µ—Ü—å –ø–µ—Ä–µ–º—ñ–≥!'), W/2, H/2);
    cancelAnimationFrame(raf);
    return;
  }
}

function render(){
  drawCourt();
  drawPaddle(left); drawPaddle(right);
  drawBall();
}

function loop(){
  if(!paused){ update(); render(); }
  raf = requestAnimationFrame(loop);
}

// –∫–µ—Ä—É–≤–∞–Ω–Ω—è –º–∏—à–∫–æ—é/—Ç–∞—á–µ–º
function toCanvasY(clientY){
  const r = cvs.getBoundingClientRect();
  const y = (clientY - r.top) * (cvs.height / r.height);
  return clamp(y - left.h/2, 0, H-left.h);
}
cvs.addEventListener('mousemove', e=>{ left.y = toCanvasY(e.clientY); });
cvs.addEventListener('touchmove', e=>{ left.y = toCanvasY(e.touches[0].clientY); e.preventDefault(); }, {passive:false});

// –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∞
window.addEventListener('keydown', e=>{
  if(e.key==='w' || e.key==='ArrowUp') left.vy = -7;
  if(e.key==='s' || e.key==='ArrowDown') left.vy = 7;
  if(e.code==='Space') togglePause();
});
window.addEventListener('keyup', e=>{
  if(['w','ArrowUp','s','ArrowDown'].includes(e.key)) left.vy = 0;
});

// –∫–Ω–æ–ø–∫–∏
function togglePause(){
  paused = !paused;
  btnPause.textContent = paused?'‚ñ∂Ô∏è –ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏':'‚è∏ –ü–∞—É–∑–∞';
}
btnPause.onclick = togglePause;
btnReset.onclick = ()=>{
  sL=sR=0; sLel.textContent='0'; sRel.textContent='0';
  left.y=right.y=mid-PADDLE_H/2; left.vy=right.vy=0;
  paused=false; btnPause.textContent='‚è∏ –ü–∞—É–∑–∞';
  serve(Math.random()<.5?'L':'R');
};

serve(Math.random()<.5?'L':'R');
loop();
</script>
</body>
</html>