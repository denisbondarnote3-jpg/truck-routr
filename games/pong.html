<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Pong</title>
<style>
  :root{--bg:#0b0b0b;--line:#2c2c2c;--p1:#22d3ee;--p2:#a78bfa;--ball:#fbbf24;--txt:#e5e7eb}
  html,body{height:100%;margin:0;background:var(--bg);color:var(--txt);font-family:system-ui,Segoe UI,Roboto,Inter,Arial}
  .wrap{display:flex;flex-direction:column;align-items:center;gap:10px;padding:12px}
  h1{margin:6px 0 0;font-weight:900;letter-spacing:.5px}
  .bar{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
  button{border:1px solid #333;background:#121212;color:#fff;padding:8px 12px;border-radius:10px;font-weight:700;cursor:pointer}
  #c{background:#111;border:1px solid var(--line);border-radius:12px;touch-action:none}
  .hint{opacity:.7;font-size:14px}
</style>
</head>
<body>
<div class="wrap">
  <h1>üèì Pong</h1>
  <div class="bar">
    <button id="btnPause">‚è∏ –ü–∞—É–∑–∞</button>
    <button id="btnReset">‚ôªÔ∏è –°–∫–∏–Ω—É—Ç–∏</button>
    <span class="hint">–ö–µ—Ä—É–≤–∞–Ω–Ω—è: W/S (–ª—ñ–≤–∏–π), ‚Üë/‚Üì (–ø—Ä–∞–≤–∏–π), –ø—Ä–æ–±—ñ–ª ‚Äî –ø–∞—É–∑–∞. –ù–∞ —Ç–µ–ª–µ—Ñ–æ–Ω—ñ ‚Äî —Ç—è–≥–Ω–∏ –ø–∞–ª—å—Ü–µ–º –ø–æ —Å—Ç–æ—Ä–æ–Ω—ñ —Å–≤–æ–≥–æ —Ä–∞–∫–µ—Ç–∫–∏.</span>
  </div>
  <canvas id="c" width="800" height="480"></canvas>
</div>

<script>
const cvs = document.getElementById('c');
const ctx = cvs.getContext('2d');

function fit() {                    // –∞–¥–∞–ø—Ç–∏–≤: –≤–ø–∏—Å–∞—Ç–∏ –≤ —à–∏—Ä–∏–Ω—É, –∞–ª–µ –Ω–µ –±—ñ–ª—å—à–µ 95vh
  const scale = Math.min(window.innerWidth*0.96/cvs.width, window.innerHeight*0.8/cvs.height);
  cvs.style.width = (cvs.width*scale|0)+'px';
  cvs.style.height= (cvs.height*scale|0)+'px';
}
window.addEventListener('resize', fit); fit();

// –≥—Ä–∞
const PADDLE_W=14, PADDLE_H=80, BALL_R=8, SPEED=5, AI=0.12;
let paused=false;
const state = {
  l:{x:20, y:cvs.height/2-PADDLE_H/2, s:0, score:0},
  r:{x:cvs.width-20-PADDLE_W, y:cvs.height/2-PADDLE_H/2, s:0, score:0},
  b:{x:cvs.width/2, y:cvs.height/2, vx:SPEED*(Math.random()<.5?-1:1), vy:(Math.random()*2-1)*SPEED}
};

function resetBall(toLeft){
  state.b.x=cvs.width/2; state.b.y=cvs.height/2;
  const dir = toLeft ? -1:1;
  state.b.vx = dir*(SPEED+Math.random()*2);
  state.b.vy = (Math.random()*2-1)*SPEED;
}
function clamp(v,a,b){ return v<a?a:v>b?b:v; }

function step(){
  if(paused){ draw(); requestAnimationFrame(step); return; }

  // —Ä—É—Ö —Ä–∞–∫–µ—Ç–æ–∫ (—à–≤–∏–¥–∫—ñ—Å—Ç—å –º–Ω–æ–∂–∏–º–æ –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç—ñ)
  state.l.y = clamp(state.l.y + state.l.s*7, 10, cvs.height-PADDLE_H-10);
  state.r.y = clamp(state.r.y + state.r.s*7, 10, cvs.height-PADDLE_H-10);

  // –ø—Ä–æ—Å—Ç–∏–π AI: —Ç—è–≥–Ω–µ –ø—Ä–∞–≤—É —Ä–∞–∫–µ—Ç–∫—É –¥–æ –º‚Äô—è—á–∞ (—è–∫—â–æ –Ω–µ –∫–µ—Ä—É—î –≥—Ä–∞–≤–µ—Ü—å)
  if(!keys['ArrowUp'] && !keys['ArrowDown']){
    const target = state.b.y - (state.r.y + PADDLE_H/2);
    state.r.y += clamp(target, -6, 6)*AI*20;
    state.r.y = clamp(state.r.y, 10, cvs.height-PADDLE_H-10);
  }

  // —Ä—É—Ö –º‚Äô—è—á–∞
  state.b.x += state.b.vx;
  state.b.y += state.b.vy;

  // –≤—ñ–¥–±–∏—Ç—Ç—è –≤—ñ–¥ —Å—Ç–µ–ª—ñ/–ø—ñ–¥–ª–æ–≥–∏
  if(state.b.y-BALL_R<=10 && state.b.vy<0){ state.b.vy*=-1; state.b.y=10+BALL_R; }
  if(state.b.y+BALL_R>=cvs.height-10 && state.b.vy>0){ state.b.vy*=-1; state.b.y=cvs.height-10-BALL_R; }

  // –∑—ñ—Ç–∫–Ω–µ–Ω–Ω—è –∑ –ª—ñ–≤–æ—é —Ä–∞–∫–µ—Ç–∫–æ—é
  if(state.b.x-BALL_R<=state.l.x+PADDLE_W && state.b.x>state.l.x &&
     state.b.y>=state.l.y && state.b.y<=state.l.y+PADDLE_H && state.b.vx<0){
    const rel=(state.b.y-(state.l.y+PADDLE_H/2))/(PADDLE_H/2);
    state.b.vx = Math.abs(state.b.vx)+0.3;   // –ø—Ä–∏—Å–∫–æ—Ä–µ–Ω–Ω—è
    state.b.vy = rel*6;
  }
  // –∑ –ø—Ä–∞–≤–æ—é
  if(state.b.x+BALL_R>=state.r.x && state.b.x<state.r.x+PADDLE_W &&
     state.b.y>=state.r.y && state.b.y<=state.r.y+PADDLE_H && state.b.vx>0){
    const rel=(state.b.y-(state.r.y+PADDLE_H/2))/(PADDLE_H/2);
    state.b.vx = -Math.abs(state.b.vx)-0.3;
    state.b.vy = rel*6;
  }

  // –≥–æ–ª
  if(state.b.x<-20){ state.r.score++; resetBall(false); }
  if(state.b.x>cvs.width+20){ state.l.score++; resetBall(true); }

  draw();
  requestAnimationFrame(step);
}

function draw(){
  // —Ñ–æ–Ω
  ctx.fillStyle = '#0f0f0f';
  ctx.fillRect(0,0,cvs.width,cvs.height);
  // –º–µ–∂—ñ
  ctx.strokeStyle= getComputedStyle(document.documentElement).getPropertyValue('--line');
  ctx.lineWidth=2;
  ctx.strokeRect(10,10,cvs.width-20,cvs.height-20);
  // —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞ –ª—ñ–Ω—ñ—è
  ctx.setLineDash([10,10]); ctx.beginPath();
  ctx.moveTo(cvs.width/2, 20); ctx.lineTo(cvs.width/2, cvs.height-20); ctx.stroke();
  ctx.setLineDash([]);

  // —Ä–∞—Ö—É–Ω–æ–∫
  ctx.fillStyle='#e5e7eb';
  ctx.font='bold 36px system-ui,Segoe UI,Roboto';
  ctx.textAlign='center';
  ctx.fillText(state.l.score, cvs.width/2-60, 60);
  ctx.fillText(state.r.score, cvs.width/2+60, 60);

  // —Ä–∞–∫–µ—Ç–∫–∏
  ctx.fillStyle=getComputedStyle(document.documentElement).getPropertyValue('--p1');
  ctx.fillRect(state.l.x, state.l.y, PADDLE_W, PADDLE_H);
  ctx.fillStyle=getComputedStyle(document.documentElement).getPropertyValue('--p2');
  ctx.fillRect(state.r.x, state.r.y, PADDLE_W, PADDLE_H);

  // –º‚Äô—è—á
  ctx.fillStyle=getComputedStyle(document.documentElement).getPropertyValue('--ball');
  ctx.beginPath(); ctx.arc(state.b.x, state.b.y, BALL_R, 0, Math.PI*2); ctx.fill();

  if(paused){
    ctx.fillStyle='rgba(0,0,0,.45)';
    ctx.fillRect(0,0,cvs.width,cvs.height);
    ctx.fillStyle='#fff'; ctx.font='900 42px system-ui';
    ctx.fillText('–ü–∞—É–∑–∞', cvs.width/2, cvs.height/2);
  }
}

// –∫–µ—Ä—É–≤–∞–Ω–Ω—è
const keys={};
window.addEventListener('keydown',e=>{
  keys[e.key]=true;
  if(e.key===' '){ paused=!paused; btnPause.textContent = paused?'‚ñ∂Ô∏è –ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏':'‚è∏ –ü–∞—É–∑–∞'; }
  if(e.key==='w'||e.key==='W') state.l.s=-1;
  if(e.key==='s'||e.key==='S') state.l.s= 1;
  if(e.key==='ArrowUp')        state.r.s=-1;
  if(e.key==='ArrowDown')      state.r.s= 1;
});
window.addEventListener('keyup',e=>{
  keys[e.key]=false;
  if(!keys['w']&&!keys['W']&&!keys['s']&&!keys['S']) state.l.s=0;
  if(!keys['ArrowUp']&&!keys['ArrowDown'])           state.r.s=0;
});

// —Ç–∞—á-–∫–µ—Ä—É–≤–∞–Ω–Ω—è (–º–æ–±—ñ–ª—å–Ω—ñ)
function touchY(ev){
  const r=cvs.getBoundingClientRect();
  return (ev.touches?ev.touches[0]:ev).clientY - r.top;
}
cvs.addEventListener('pointerdown',e=>{
  const x=e.clientX - cvs.getBoundingClientRect().left;
  if(x<cvs.width/2) state.l.y = clamp(touchY(e)-PADDLE_H/2, 10, cvs.height-PADDLE_H-10);
  else              state.r.y = clamp(touchY(e)-PADDLE_H/2, 10, cvs.height-PADDLE_H-10);
});
cvs.addEventListener('pointermove',e=>{
  if(e.buttons!==1) return;
  const x=e.clientX - cvs.getBoundingClientRect().left;
  if(x<cvs.width/2) state.l.y = clamp(touchY(e)-PADDLE_H/2, 10, cvs.height-PADDLE_H-10);
  else              state.r.y = clamp(touchY(e)-PADDLE_H/2, 10, cvs.height-PADDLE_H-10);
});

// –∫–Ω–æ–ø–∫–∏
const btnPause=document.getElementById('btnPause');
const btnReset=document.getElementById('btnReset');
btnPause.onclick=()=>{ paused=!paused; btnPause.textContent = paused?'‚ñ∂Ô∏è –ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏':'‚è∏ –ü–∞—É–∑–∞'; };
btnReset.onclick=()=>{ state.l.score=0; state.r.score=0; resetBall(Math.random()<.5); };

resetBall(Math.random()<.5);
draw();
requestAnimationFrame(step);
</script>
</body>
</html>